# Media Describe - Overrides Node Documentation

**Date**: October 7, 2025  
**Status**: Completed

## Overview

The `Media Describe - Overrides` node provides paragraph-level override controls for the `MediaDescribe` node. This allows you to replace specific paragraphs generated by Gemini with your own custom text, giving you fine-grained control over the final output.

## Purpose

This node separates override configuration from the main MediaDescribe node, keeping the UI cleaner and making override functionality:

- **Modular**: Can be easily added or removed from workflows
- **Reusable**: Single overrides node can be connected to multiple MediaDescribe nodes
- **Organized**: Override controls don't clutter the main MediaDescribe node

## Inputs

All inputs are **optional** multiline text fields. Leave any field empty to use Gemini's generated output for that paragraph.

### Override Fields

| Field Name                     | Type               | Applies To      | Description                                             |
| ------------------------------ | ------------------ | --------------- | ------------------------------------------------------- |
| `override_subject`             | STRING (multiline) | Images & Videos | Override text for SUBJECT paragraph                     |
| `override_cinematic_aesthetic` | STRING (multiline) | Images & Videos | Override text for CINEMATIC AESTHETIC CONTROL paragraph |
| `override_stylization_tone`    | STRING (multiline) | Images & Videos | Override text for STYLIZATION & TONE paragraph          |
| `override_clothing`            | STRING (multiline) | Images & Videos | Override text for CLOTHING paragraph                    |
| `override_scene`               | STRING (multiline) | Videos Only     | Override text for SCENE paragraph                       |
| `override_movement`            | STRING (multiline) | Videos Only     | Override text for MOVEMENT paragraph                    |

## Output

| Output Name | Type      | Description                                                                       |
| ----------- | --------- | --------------------------------------------------------------------------------- |
| `overrides` | OVERRIDES | Dictionary containing all override values, ready to connect to MediaDescribe node |

## Usage

### Basic Workflow

```
┌──────────────────────────────┐
│ Media Describe - Overrides   │
│                              │
│ override_subject: [text]     │
│ override_clothing: [text]    │
│ ... (other fields)           │
└──────────────────────────────┘
              │
              │ (overrides)
              ▼
┌──────────────────────────────┐
│ MediaDescribe                │
│                              │
│ overrides: ● (connected)     │
└──────────────────────────────┘
```

### Connection Steps

1. Add **Media Describe - Overrides** node to your workflow
2. Fill in any override fields you want (leave others empty)
3. Add **MediaDescribe** node
4. Connect the `overrides` output to the `overrides` input on MediaDescribe
5. Run the workflow

### Example: Override Subject Only

**Setup:**

```
Media Describe - Overrides:
  override_subject = "A woman with sleek ponytail, standing confidently"
  (all other fields empty)
```

**Result:**

- Subject paragraph uses your custom text
- All other paragraphs generated by Gemini

### Example: Consistent Style Across Multiple Images

```
┌─────────────────────────────┐
│ Media Describe - Overrides  │
│                             │
│ override_cinematic: [style] │
│ override_stylization: [mood]│
└─────────────────────────────┘
         │ (overrides)
         ├──────────────┬──────────────┐
         ▼              ▼              ▼
  [MediaDescribe 1] [MediaDescribe 2] [MediaDescribe 3]
```

This workflow applies the same cinematic style and mood to multiple different images.

## How It Works

### Data Flow

1. **User fills in override fields** → Text entered in multiline inputs
2. **Node creates dictionary** → All values bundled into an `OVERRIDES` dict
3. **Dictionary passed to MediaDescribe** → Connected via `overrides` input
4. **MediaDescribe extracts values** → Applies overrides during paragraph parsing
5. **Final output generated** → Custom text replaces Gemini's output where provided

### Technical Implementation

```python
def create_overrides(self, override_subject="", override_cinematic_aesthetic="",
                    override_stylization_tone="", override_clothing="",
                    override_scene="", override_movement=""):
    overrides = {
        "override_subject": override_subject,
        "override_cinematic_aesthetic": override_cinematic_aesthetic,
        "override_stylization_tone": override_stylization_tone,
        "override_clothing": override_clothing,
        "override_scene": override_scene,
        "override_movement": override_movement
    }
    return (overrides,)
```

## Benefits

### 1. Cleaner UI

- MediaDescribe node is less cluttered
- Override controls only visible when needed

### 2. Reusability

- One overrides node can serve multiple MediaDescribe nodes
- Consistent overrides across batch processing

### 3. Modularity

- Easy to add/remove override functionality
- Optional - workflow works fine without it

### 4. Flexibility

- Mix and match: some MediaDescribe nodes with overrides, some without
- Different override configurations for different nodes

## Use Cases

### Use Case 1: Brand Consistency

**Scenario:** You need all images to have the same subject and style descriptions.

**Setup:**

```
Media Describe - Overrides:
  override_subject = "A professional model with modern styling"
  override_stylization_tone = "Clean, commercial aesthetic with bright mood"
```

**Result:** All images get these consistent subject and style descriptions while Gemini analyzes clothing, lighting, etc.

### Use Case 2: Selective Override

**Scenario:** Gemini describes subjects well, but you want specific lighting.

**Setup:**

```
Media Describe - Overrides:
  override_cinematic_aesthetic = "Soft key light from 45° camera left, rim light from behind, f/2.8 bokeh"
  (all other fields empty)
```

**Result:** Uses Gemini for subject, style, clothing, but your custom lighting description.

### Use Case 3: Template-Based Workflow

**Scenario:** Pre-fill certain paragraphs as templates, let Gemini analyze the rest.

**Setup:**

```
Media Describe - Overrides:
  override_stylization_tone = "Cinematic realism with dramatic, moody atmosphere"
  override_scene = "Modern urban environment with industrial architecture"
  (subject, clothing, movement from Gemini)
```

**Result:** Consistent style and scene, dynamic subject/clothing descriptions.

## Important Notes

### Video-Specific Fields

- `override_scene` and `override_movement` only apply to videos
- For images, these fields are ignored (safe to leave with values)
- Video workflows benefit most from movement overrides

### Empty vs Filled

- **Empty field** = Use Gemini's generated text
- **Field with text** = Use your custom text (replaces Gemini)
- **Field with whitespace** = Treated as empty

### No Validation

- Node accepts any text in override fields
- No character limits or format requirements
- Responsibility on user to provide good descriptions

### Caching Behavior

- Overrides applied AFTER cache lookup
- Changing overrides doesn't invalidate cache
- Gemini still generates full description (which may be cached)

## Workflow Patterns

### Pattern 1: Single Override Node for Batch

```
[Overrides] ──┬──→ [MediaDescribe (Image 1)]
              ├──→ [MediaDescribe (Image 2)]
              ├──→ [MediaDescribe (Image 3)]
              └──→ [MediaDescribe (Image 4)]
```

### Pattern 2: Different Overrides per Node

```
[Overrides A] ──→ [MediaDescribe (Portrait)]
[Overrides B] ──→ [MediaDescribe (Landscape)]
```

### Pattern 3: Optional Override Path

```
[MediaDescribe without overrides] ──→ [Output 1]

[Overrides] ──→ [MediaDescribe with overrides] ──→ [Output 2]
```

## Comparison: Before vs After

### Before (Original Implementation)

- 6 override fields directly on MediaDescribe node
- MediaDescribe UI very crowded
- Each MediaDescribe node needed individual override values

### After (Current Implementation)

- Dedicated Media Describe - Overrides node
- Clean MediaDescribe UI with single `overrides` connection
- One overrides node can serve multiple MediaDescribe nodes
- Better separation of concerns

## Troubleshooting

### Issue: Overrides not being applied

**Solution:** Ensure the `overrides` output is connected to MediaDescribe's `overrides` input

### Issue: All paragraphs are custom (no Gemini content)

**Solution:** Leave some override fields empty - only fill the ones you want to replace

### Issue: Video paragraphs showing in image workflow

**Solution:** This is normal - video-specific fields are ignored for images

---

**Node Type**: Configuration/Utility  
**Category**: Swiss Army Knife 🔪  
**Status**: Production Ready  
**Breaking Changes**: None (additive feature)
